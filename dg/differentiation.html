<!DOCTYPE html>
<html lang='en'>

<head>
    <base href="..">
    <link rel="stylesheet" type="text/css" media="all" href="assets/main.css"/>
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=default">
    </script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ TeX: { extensions: ["AMSmath.js"] }});
      </script>
    <title>Differentiation</title>
</head>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
  * {box-sizing: border-box;}
  
  .header {
    overflow: hidden;
    background-color: #f8f8f885;
    padding: 20px 10px;
  }
  
  .header a {
    float: left;
    color: #050d38;
    text-align: center;
    padding: 12px;
    text-decoration: none;
    font-size: 18px; 
    line-height: 25px;
    border-radius: 4px;
  }
  
  .header a.logo {
    font-size: 25px;
    font-weight: bold;
  }
  
  .header a:hover {
    background-color: #ffffff;
    color: black;
  }
  
  .header a.active {
    background-color: #00baff;
    color: black;
  }
  
  .header-right {
    float: right;
  }
  
  @media screen and (max-width: 500px) {
    .header a {
      float: none;
      display: block;
      text-align: left;
    }
    
    .header-right {
      float: none;
    }
  }

  body{
  background-color: #f8f8f885;
  background-size: cover;
  background-attachment: fixed;
  color: #000000; 
  text-align:left;
  font-family:'Comic Sans MS';
  /*font-family:'Roboto',sans-serif;*/
  font-size:16pt;
  line-height:1.5em;
  margin: 60px auto;
  width: 1000px;
  }
  </style>
  </head>
    <body>
    
    <div class="header">
        <a class="active" href="index.html#notes">Back to Website</a>
    </div>
    </body>
<body>
    <header>
        <h4>Differentiation</h4>
    </header>
    <h4>
      Exterior differentiation
    </h4>
    <div>
        <ul style="list-style-type:none;">
          <li>
            Given a differential form \(\omega\) on \(M\). On a local chart \((U, \varphi)\) on \((M,g)\), suppose it
            can be written as
            \[\omega=f\mathrm{d}x^{i_1}\wedge \cdots \wedge \mathrm{d}x^{i_k},\]
            then we define 
            \[\mathrm{d}\omega=\mathrm{d}f \wedge \mathrm{d}x^{i_1}\wedge \cdots \wedge \mathrm{d}x^{i_k} \]
            on the same chart, where \(\mathrm{d}f=\sum_i\partial_if \mathrm{d}x^i\). This is called the exterior derivative.
          </li>
        </ul>
        <ul>
          <li>
            Claim: The above definition is independent of local chart.
          </li>
          <li style="list-style-type:none;">
            Proof of claim: We will use the fact that \(\mathrm{d}^2=0\). Observe that for all vector \(v\) on \(M\), 
            \((\mathrm{d}\varphi^*f)(v)=\mathrm{d}(f\circ \varphi)(v)=\mathrm{d}f(\varphi_*v)=\varphi^*\mathrm{d}f\). Then
            \[ 
            \begin{align} 
              \mathrm{d}(\varphi^*\omega) &= \mathrm{d} (\varphi^*(f\mathrm{d}x^{i_1}\wedge \cdots \wedge \mathrm{d}x^{i_k}))\\
              &= \mathrm{d}(\varphi^*f \wedge \varphi^*\mathrm{d}x^{i_1}\wedge \cdots \wedge \mathrm{d}x^{i_k})\\
              &= \mathrm{d}\varphi^*f \wedge \varphi^* \mathrm{d}x^{i_1}\wedge \cdots \wedge \mathrm{d}x^{i_k}
              + \varphi^*f\wedge \mathrm{d}(\varphi^*\mathrm{d}x^{i_1}\wedge \cdots \wedge \mathrm{d}x^{i_k}) \\
              &= \varphi^*(\mathrm{d}f\wedge \mathrm{d}x^{i_1}\wedge \cdots \wedge \mathrm{d}x^{i_k})\\
              &= \varphi^*(\mathrm{d}\omega) 
            \end{align}
            \]
          </li>
        </ul>
    </div>
    <h4>
        Lie derivative
    </h4>
    <div>
      <ul style="list-style-type:none;">
        <li>
          In basic calculus we use the first principle to differentiate \(f\in C^\infty(\mathbb{R}^n)\): if the limit
          \[\lim_{t\rightarrow 0} \frac{f(x+vt)-f(x)}{t}\]
          exists then we say that \(f\) is differentiable along the direction of \(v\) at the point \(x\). If such limit
          holds for all directions \(v\), then we say that \(f\) is differentiable at \(x\).
      </li>
      <li>
          On manifold it takes more effort to define an analog of \(f(x+vt)\), which geometrically means moving the point \(x\)
          a little bit along \(v\): by ODE theory, fix \((x, v)\) there exists a unique curve \(\gamma_v:(-\epsilon, \epsilon)\rightarrow M\) such that
          \(\gamma_v(0)=x, \gamma_v'(0)=v\) and we may define
          \[\varphi_t: p \mapsto \gamma_{X(p)}(t)\]
          as a one-parameter subgroup of diffeomorphism on \(M\) induced by a vector field \(X\).
      </li>
      <li>
          Using \(\varphi_t\) we can talk about differentiating along a vector field. For instance, we define
          \[\mathcal{L}_Xf= \lim_{t\rightarrow 0} \frac{f(\varphi_t(p))-f(p)}{t}\]
          to be the Lie derivative of \(f\) along a given vector field \(X\). The RHS is analogous to the first principle.
      </li>
      </ul>
        <ul>
            <li>
                Claim: \(\mathcal{L}_X f=Xf\) for all \(f\in C^\infty(M)\).
            </li>
            <li style="list-style-type:none;">
                Proof of claim: at any \(p\in M\) we have
                \[
                \begin{align} 
                    \lim_{t\rightarrow 0} \frac{f(\varphi_t(p))-f(p)}{t}&= 
                    \lim_{t\rightarrow 0} \frac{f(\varphi_t(p))-f(p)}{\varphi_t(p)-p} \frac{\varphi_t(p)-p}{t} \\
                    &=  \mathrm{d} f (p) X(p) \\
                    &= Xf(p).
                \end{align}
                \]
            </li>
            <li style="list-style-type:none;">
              Next, we extend the notion to differentiating smooth vector fields. A diffeomorphism on \(M\) induces push-forward map on the 
              vector fields, so we define
              \[\mathcal{L}_XY= \lim_{t\rightarrow 0} \frac{(\varphi_{-t})_* Y(\varphi_t(p))-Y(p)}{t}\]
            </li>
            <li>
                Claim: \(\mathcal{L}_X Y=[X,Y]\) for all \(Y\in \Gamma(TM)\).
            </li>
            <li style="list-style-type:none;">
            Proof of claim: for any \(f\in C^\infty(M)\),
            \[
            \begin{align}
                \lim_{t\rightarrow 0} \frac{(\varphi_{-t})_* Y(\varphi_t(p))-Y(p)}{t}f &=
                \lim_{t\rightarrow 0} \frac{((\varphi_{-t})_* Yf)(\varphi_t(p))-(Yf)(p)}{t}
                \\
               &= \lim_{t\rightarrow 0} \frac{Y(f \circ \varphi_{-t})(\varphi_t(p))-(Yf)(p)}{t}
                \\
                &= \lim_{t\rightarrow 0} \frac{\varphi^*_t(Y(\varphi^*_{-t}f))-Yf}{t}(p) \\
                &=  \lim_{t\rightarrow 0} \varphi^*_t Y \frac{\varphi^*_{-t}f-f}{t}
                +  \lim_{t\rightarrow 0} \frac{\varphi^*_t Yf - Yf}{t} \\
                &= \lim_{t\rightarrow 0} Y(-Xf) + XYf\\
                &= [X,Y]f.
            \end{align}
            \]
            </li>
            <li style="list-style-type:none;">
              Lie derivatives on \(k\)-forms are defined by using push-forward maps
              \[\mathcal{L}_X\omega (Y_1, \cdots, Y_n) = \lim_{t\rightarrow 0} \frac{\varphi^*_t \omega-\omega}{t}
              (Y_1, \cdots, Y_n)\]
            </li>
            <li>
              Claim:
              \(\mathcal{L}_X\omega (Y_1, \cdots, Y_n)
              =X\omega(Y_1, \cdots, Y_k) - \sum_i \omega(Y_1, \cdots, \mathcal{L}_XY_i. \cdots, Y_k).\)
            </li>
            <li  style="list-style-type:none;">
              Proof of claim:
              \[
              \begin{align} 
              &\quad \lim_{t\rightarrow 0} \frac{\varphi^*_t \omega (\varphi_t(p))-\omega(p)}{t}
              (Y_1, \cdots, Y_n)\\
               &= 
              \lim_{t\rightarrow 0} \frac{1}{t} \left[
              \varphi^*_t \omega (\varphi_{t*}Y_1(p) , \cdots, \varphi_{t*}Y_n(p))- \omega(Y_1(p), \cdots, Y_n(p))
              \right] \\
              &=  \lim_{t\rightarrow 0} \frac{1}{t} [
              \varphi^*_t \omega (\varphi_{t*}Y_1(p) , \cdots, \varphi_{t*}Y_n(p))-
              \varphi^*_t \omega (Y_1(p) ,\varphi_{t*}Y_2(p), \cdots, \varphi_{t*}Y_n(p))\\
              &\quad + \varphi^*_t \omega (Y_1(p) ,\varphi_{t*}Y_2(p), \cdots, \varphi_{t*}Y_n(p))
              - \varphi^*_t \omega (Y_1(p) ,Y_2(p), \varphi_{t*}Y_3(p), \cdots, \varphi_{t*}Y_n(p))\\
              &\quad + \cdots +\varphi^*_t \omega (Y_1(p) ,Y_2(p), Y_3(p), \cdots, Y_n(p)) - \omega(Y_1(p), \cdots, Y_n(p))] \\
              &= -\sum_i \omega(Y_1, \cdots, \mathcal{L}_XY_i. \cdots, Y_k) + X\omega(Y_1, \cdots, Y_k)
              \end{align}
              \]
              The negative sign is because we differentiated in the opposite direction for \(\mathcal{L}_XY\).
            </li>
        </ul>
    </div>
    <h4>
      Covariant derivative
    </h4>
    <div>
      <ul>
          <li style="list-style-type:none;">
            In basic calculus we are familiar with the following derivation rule: for all \(f,g\in C^\infty(\mathbb{R})\), we have 
            \[(fg)'=f'g+g'f.\]
            However, the Lie derivative is not a derivation in the sense that
            \[\mathcal{L}_X(fY)\neq X(f)Y+f\mathcal{L}_XY.\]
          </li>
          <li>
            Theorem: Define the operator \(\nabla\) such that for all \(X,Y,M\in \Gamma(TM)\) we have
            \[2g(\nabla_XY,Z)=(\mathcal{L}_Xg)(Y,Z)+(\mathrm{d} \theta_X)(Y,Z)\]
            where \(\theta_X: Y\mapsto g(X,Y)\).
            Then \(\nabla\) satisfies the following properties: 
            <ul>
              <li>
                \(\nabla_{aY+bZ}X=a\nabla_YX+b\nabla_ZX\)
              </li>
              <li>
                \(\nabla_Y(X+Z)=\nabla_YX+\nabla_YZ; \nabla_Y(fX)=Y(f)X+f\nabla_YX\)
              </li>
              <li>
                Torsion free: \(\nabla_XY-\nabla_YX=[X,Y]\)
              </li>
              <li>
                Metric: \(Zg(X,Y)=g(\nabla_ZX,Y)+g(X,\nabla_ZY)\)
              </li>
            </ul>
          </li>
          <li style="list-style-type:none;">
            Proof of theorem: We only check the derivation formula here, i.e. we want to show that 
            \[\nabla_Y(fX),Z=f\nabla_YX+(Yf)X.\]
            We start with 
            \[
            \begin{align} 
              &\quad 2g(\nabla_Y fX,Z) \\
            &= \mathcal{L}_{fX}g(Y,Z)+\mathrm{d}\theta_{fX}(Y,Z)\\
            &= fXg(Y,Z)-g([fX,Y],Z)-g(Y,[fX,Z])+Y\theta_{fX}(Z)-Z\theta_{fX}(Y)-\theta_{fX}([Y,Z])\\
            &= fXg(Y,Z)-g(fXY-(Yf)X-fYX,Z)-g(Y,fXZ-(Zf)X-fZX)+Yg(fX,Z)-Zg(fX,Y)-g(fX,[Y,Z])\\
            &= fXg(Y,Z)-fg([X,Y],Z)+(Yf)g(X,Z)-fg(Y,[X,Z])+(Zf)g(Y,X)+g((Yf)X+fYX,Z)\\
            &\quad +g(fX,YZ)-g((Zf)X+fZX,Y)-g(fX,ZY)-g(fX,[Y,Z])\\
            &= fXg(Y,Z)-fg([X,Y],Z)+2(Yf)g(X,Z)-fg(Y,[X,Z])+fg(YX,Z)-fg(ZX,Y) \\
            &= f\mathcal{L}_Xg(Y,Z)+2(Yf)g(X,Z)+fg(YX,Z)-fg(ZX,Y)
            \end{align}
            \]
            and observe that 
            \[
            \begin{align}
            \mathrm{d}\theta_X(Y,Z)&=Y\theta_X(Z)-Z\theta_X(Y)-\theta_X([Y,Z])\\
              &=Yg(X,Z)-Zg(X,Y)-g(X,[Y,Z])\\
              &= g(YX,Z)+g(X,YZ)-g(ZX,Y)-g(X,ZY)-g(X,YZ)+g(X,ZY) \\
              &= g(YX,Z)-g(ZX,Y)
            \end{align}
            \]
            Therefore,
            \[
            \begin{align}
              2g(\nabla_Y (fX),Z)&= f\mathcal{L}_Xg(Y,Z)+2(Yf)g(X,Z)+f\mathrm{d}\theta_X(Y,Z)\\
              &= 2fg(\nabla_YX,Z)+2g((Yf)X,Z)\\
              &=2g(f\nabla_YX+(Yf)X,Z)
            \end{align}
            \]
          </li>
          <li>
            Claim: THe operator \(\nabla\) satisfying the above properties is unique.
          </li>
          <li style="list-style-type:none;">
            Proof of claim:
              By metric compatibility, we can write down
              \[
              \begin{align} 
                Xg(Y,Z) &= g(\nabla_XY, Z) + g(Y, \nabla_XZ) \\
                Yg(X,Z) &= g(\nabla_Y X, Z) + g(X, \nabla_YZ) \\
                Zg(X,Y)&= g(\nabla_ZX, Y) + g(X, \nabla_ZY)
              \end{align}
              \]
              and using the torsion free property to deduce
              \[
              \begin{align}
                Xg(Y,Z)+Yg(X,Z)-Zg(X,Y) &=
                 g(\nabla_XY, Z)+g(\nabla_YX, Z)+ g(Y, [X,Z])+g(X,[Y,Z])\\
                 &= g(X,[Y,Z])+g(Y,[X,Z])+g(Z,[X,Y])+2g(Z,\nabla_YX)
              \end{align}
              \]
              Hence, the desired \(\nabla\) can be defined by
              \[g(Z,\nabla_YX):= \frac{1}{2}[Xg(Y,Z)+Yg(X,Z)-Zg(X,Y)-g(X,[Y,Z])-g(Y,[X,Z])-g(Z,[X,Y])] \]
              and it is uniquely determined by the metric \(g\). This formula agrees with the definition at the beginning.
          </li>
          <li>
            This unique connection is called the Levi-Civita connection, sometimes written \(\nabla^{LC}\) if there are many connections in use.
          </li>
          <li>
            Put \(X=\partial_i, Y=\partial_j, Z=\partial_l\) we obtain
            \[g(\partial_l, \nabla_j \partial_i) =\frac{1}{2}(\partial_i g_{jl} + \partial_j g_{il} - \partial_l g_{ij})\]
            By linearity there exists some coefficients \(\Gamma^k_{ij}\) such that \(\nabla_j \partial_i = \Gamma^k_{ij}\partial_k\).
            We call them the Christoffel symbols. By the above calculation, we have
            \[\Gamma^k_{ij}=\frac{1}{2}g^{kl}(\partial_i g_{jl} + \partial_j g_{il} - \partial_l g_{ij}).\]
          </li>
          <li>
            Algebraically, we define the covariant derivative on \(k\)-forms as follows:
            \[\nabla \omega(X, Y_1, \cdots, Y_n)=(\nabla_X\omega)(Y_1, \cdots, Y_n)=\nabla_X (\omega(Y_1, \cdots, Y_n))- \sum_i \omega(Y_1, \cdots, \nabla_XY_i, \cdots, Y_n). \]
          </li>
      </ul>
    </div>
    <h4>
      The divegence, gradient, Hessian and Laplacian.
    </h4>
    <div>
          <li>
            We ask for the meaning of second derivative for functions. Define the Hessian of a (smooth) 
            function \(f\) on Riemannian manifold \(M,g\) by
            \[Hess f(X,Y) := \frac{1}{2}(\mathcal{L}_{\nabla f}g)(X,Y)\]
            Claim: \(Hess f(X,Y)=g(\nabla_X \nabla f, Y)=(\nabla_X \mathrm{d} f)Y\) where \(\nabla\) is the Levi-Civita connection.
          </li>
          <li style="list-style-type:none;">
            Proof of claim: First of all, we show that \((\nabla_X \mathrm{d} f)Y=g(\nabla_X \nabla f, Y)\). The calculation is 
            \[
            \begin{align} 
              (\nabla \mathrm{d} f)(X,Y) &= (\nabla_X \mathrm{d} f)Y \\
                &= XYf - \nabla_{\nabla_XY}f\\
                g(\nabla_X \nabla f, Y) &= Xg(\nabla f, Y)-g(\nabla f, \nabla_X Y)\\
                  &= XYf - \nabla_{\nabla_XY}f \\
                  &= (\nabla_X \mathrm{d} f)Y.
            \end{align}
            \]
            Next, we show that \((\nabla_X \mathrm{d} f) Y = (\nabla_Y \mathrm{d} f) X\). The calculation is 
            \[
            \begin{align} 
              (\nabla_X \mathrm{d} f) Y - (\nabla_Y \mathrm{d} f) X &= XYf - YXf -(\nabla_{\nabla_XY}-\nabla_{\nabla_YX})f\\
              &= ([X,Y]-\nabla_{[X,Y]})f\\
              &= 0
            \end{align}
            \]
            Finally, we have
            \[
            \begin{align} 
              (\nabla_X \mathrm{d}f) Y &= \frac{1}{2}(\nabla_X \mathrm{d} f)Y + \frac{1}{2}(\nabla_Y \mathrm{d}f)X \\
              &= \frac{1}{2}g(\nabla_X\nabla f, Y)+\frac{1}{2}g(\nabla_Y \nabla f)X\\
              &= \frac{1}{2} (\nabla_{\nabla f}g)(X,Y)+\frac{1}{2}g(\nabla_X \nabla f, Y) + \frac{1}{2}g(X, \nabla_Y\nabla f)\\
              &= \frac{1}{2}\nabla f(g(X,Y)) -\frac{1}{2} g(\nabla_{\nabla f}X, Y)-\frac{1}{2}g(\nabla_{\nabla f}Y, X)
              +\frac{1}{2}g(\nabla_X \nabla f, Y) + \frac{1}{2}g(X, \nabla_Y\nabla f) \\
              &= \frac{1}{2}\nabla f(g(X,Y))-\frac{1}{2}g([\nabla f, X], Y)-\frac{1}{2}g([\nabla f, Y],X)\\
              &= \frac{1}{2}\mathcal{L}_{\nabla f}g(X,Y).
            \end{align}
            \]
          </li>
    </div>
</body>
    </html>